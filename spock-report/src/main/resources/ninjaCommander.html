<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html"
      xmlns="http://www.w3.org/1999/html">
  <head>
    <meta charset="utf-8">
    <title>Spock Report - Ninja Commander</title>
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="css/style.css" rel="stylesheet" media="screen">
  </head>
  <body class="container-fluid">
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="brand" href="#">spock-report</a>
        <div class="nav">
          <div class="btn-group" data-toggle="buttons-radio">
            <button id="state-all" type="button" class="btn btn-default active">All</button>
            <button id="state-passed" type="button" class="btn">Passed</button>
            <button id="state-failed" type="button" class="btn">Failed</button>
            <button id="state-skipped" type="button" class="btn">Skipped</button>
          </div>
          <div class="btn-group">
            <button class="btn dropdown-toggle" data-toggle="dropdown" href="#">
              Expansions
              <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
              <li><a id="expansions-packages" tabindex="-1" href="#">Packages</a></li>
              <li><a id="expansions-specifications" tabindex="-1" href="#">Specifications</a></li>
              <li><a id="expansions-requirements" tabindex="-1" href="#">Requirements</a></li>
              <li><a id="expansions-exceptions" tabindex="-1" href="#">Exceptions</a></li>
              <li><a id="expansions-narrative" tabindex="-1" href="#">Narrative</a></li>
              <li><a id="expansions-full-details" tabindex="-1" href="#">Full Details</a></li>
            </ul>
          </div>
          <div class="btn-group">
            <button id="showResults" type="button" class="btn active" data-toggle="button">Show Results</button>
          </div>
        </div>
        <form class="navbar-search">
          <input type="text" class="search-query" placeholder="not yet implemented">
        </form>
      </div>
    </div>
  </div>
  <h1 style="text-align: center;">
    <span class="elementName">Ninja Commander</span>
    <span class="results">
      <span class="pie">220,40,10</span><br/>
      <small>
        <span class="counts">(27 specs, 22 passed, 4 failed, 1 skipped)</span>
        <span class="duration">(17 mins 41 secs)</span>
      </small>
    </span>
  </h1>
  <ul class="packages">
      <li class="specElement element package">
        <h2 class="elementHeader">
          <a class="elementName">com.ninja.ai</a>
          <span class="results">
            <span class="pie">60,20,10</span>
            <small>
              <span class="counts">(9 specs, 6 passed, 2 failed, 1 skipped)</span>
              <span class="duration">(7 mins 25 secs)</span>
            </small>
          </span>
        </h2>
        <ul class="elementBody specs">
          <li class="specElement element spec failed">
            <h3 class="elementHeader">
              <a class="elementName">Fight Or Flight</a>
              <span class="results">
                <span class="label label-important">Failed</span>
                <span class="pie">1,1,1</span>
                <small>
                  <span class="counts">(3 requirements, 1 passed, 1 failed, 1 skipped)</span>
                  <span class="duration">(4 mins 53 secs)</span>
                </small>
              </span>
            </h3>
            <div class="elementBody">
              <blockquote class="narrative">
                <p>
                  In order to increase the ninja survival rate<br/>
                  As a ninja commander<br/>
                  I want my ninjas to decide whether to take on an opponent based on their skill levels
                </p>
              </blockquote>
              <blockquote class="narrative collapsed">
                <p>In order to increase the ninja survival rate [...]</p>
              </blockquote>
              <ul class="requirements">
                <li class="specElement element requirement passed">
                  <h4 class="elementHeader">
                    <a class="elementName">Strong Opponent</a>
                    <span class="results">
                      <span class="label label-success">Passed</span>
                      <small>
                        <span class="duration">(0.37 secs)</span>
                      </small>
                    </span>
                  </h4>
                  <div class="elementBody">
                    <blockquote class="narrative">
                      <p>
                        <strong>Given</strong> the ninja has a third level black-belt<br/>
                        <strong>When</strong> attacked by Chuck Norris<br/>
                        <strong>Then</strong> the ninja should run for his life
                      </p>
                    </blockquote>
                    <blockquote class="narrative collapsed">
                      <p><strong>Given</strong> the ninja has a third level black-belt [...]</p>
                    </blockquote>
                    <ul class="results">
                      <li class="result element">
                        <h5 class="elementHeader">
                          <a class="elementName">Standard Output</a>
                        </h5>
                        <pre class="elementBody">
    some standard
    output </pre>
                      </li>
                      <li class="result element">
                        <h5 class="elementHeader">
                          <a class="elementName">Attachments</a>
                        </h5>
                        <ul class="elementBody">
                          <li>
                            <a href="screenshot.png">003-001-correct the email address by editing the input field-end.png</a>
                          </li>
                          <li>
                            <a href="pagedump.html">003-001-correct the email address by editing the input field-end.html</a>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </div>
                </li>
                <li class="specElement element requirement skipped">
                  <h4 class="elementHeader">
                    <a class="elementName">Invisible Opponent</a>
                    <span class="results">
                      <span class="label label-warning">Skipped</span>
                      <small>
                        <span class="duration">(0.00 secs)</span>
                      </small>
                    </span>
                  </h4>
                  <div class="elementBody">
                    <blockquote class="narrative">
                      <p>
                        <strong>Given</strong> the ninja has a third level black-belt<br/>
                        <strong>When</strong> attacked by an invisible creature<br/>
                        <strong>Then</strong> the ninja should cast a "tee-mac-woo" spell<br/>
                        &emsp;<strong>And</strong> hope for the best
                      </p>
                    </blockquote>
                    <blockquote class="narrative collapsed">
                      <p><strong>Given</strong> the ninja has a third level black-belt [...]</p>
                    </blockquote>
                  </div>
                </li>
                <li class="specElement element requirement failed">
                  <h4 class="elementHeader">
                    <a class="elementName">Weak Opponent</a>
                    <span class="results">
                      <span class="label label-important">Failed</span>
                      <small>
                        <span class="duration">(4.16 secs)</span>
                      </small>
                    </span>
                  </h4>
                  <div class="elementBody">
                    <blockquote class="narrative">
                      <p>
                        <strong>Given</strong> the ninja has a third level black-belt<br/>
                        <strong>When</strong> attacked by a samurai<br/>
                        <strong>Then</strong> the ninja should engage the opponent
                      </p>
                    </blockquote>
                    <blockquote class="narrative collapsed">
                      <p><strong>Given</strong> the ninja has a third level black-belt [...]</p>
                    </blockquote>
                    <ul class="results">
                      <li class="result element exceptions">
                        <h5 class="elementHeader">
                          <a class="elementName">Exceptions</a>
                        </h5>
                        <pre class="elementBody">
    Condition not satisfied:

    Math.max(1, 2) == 4
         |         |
         2         false

    at FightOrFlight.WeakOpponent(FightOrFlight.groovy:37) </pre>
                      </li>
                      <li class="result element">
                        <h5 class="elementHeader">
                          <a class="elementName">Standard Output</a>
                        </h5>
                        <pre class="elementBody">
    some standard
    output </pre>
                      </li>
                      <li class="result element">
                        <h5 class="elementHeader">
                          <a class="elementName">Error Output</a>
                        </h5>
                        <pre class="elementBody">
    some error
    output </pre>
                      </li>
                      <li class="result element">
                        <h5 class="elementHeader">
                          <a class="elementName">Attachments</a>
                        </h5>
                        <ul class="elementBody">
                          <li>
                            <a href="screenshot.png">003-001-correct the email address by editing the input field-end.png</a>
                          </li>
                          <li>
                            <a href="pagedump.html">003-001-correct the email address by editing the input field-end.html</a>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </div>
                </li>
              </ul>
            </div>
          </li>
        </ul>
      </li>
    </ul>
  <script src="js/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.peity.js"></script>
  <script>
    $(document).ready(function() {
      $(".elementHeader").click(function() {
        toggleElements($(this).closest(".element"));
      });
      $(".narrative").click(function() {
        toggleNarratives($(this).closest(".element"));
      });
      $("h1 span.pie").peity("pie", {
        colours: ['#468847', '#B94A48', '#F89406'],
        diameter: 30
      });
      $("h2 span.pie").peity("pie", {
        colours: ['#468847', '#B94A48', '#F89406'],
        diameter: 25
      });
      $("h3 span.pie").peity("pie", {
        colours: ['#468847', '#B94A48', '#F89406'],
        diameter: 20
       });
      $("#state-all").click(function() {
        $(".specElement").show();
        $(".spec.passed .elementHeader .label").addClass("label-success");
        $(".spec.failed .elementHeader .label").addClass("label-important");
        $(".spec.skipped .elementHeader .label").addClass("label-warning");
      });
      $("#state-passed").click(function() {
        showSpecElementsContainingState("passed");
        $(".spec.passed .elementHeader .label").addClass("label-success");
        $(".spec.failed .elementHeader .label").removeClass("label-important");
      });
      $("#state-failed").click(function() {
        showSpecElementsContainingState("failed");
        $(".spec.passed .elementHeader .label").removeClass("label-success");
        $(".spec.failed .elementHeader .label").addClass("label-important");
      });
      $("#state-skipped").click(function() {
        showSpecElementsContainingState("skipped");
        $(".spec.passed .elementHeader .label").removeClass("label-success");
        $(".spec.failed .elementHeader .label").removeClass("label-important");
      });

      $("#expansions-packages").click(function() {
        collapseElements($(".element"));
        collapseNarratives($(".specElement"));
      });

      $("#expansions-specifications").click(function() {
        expandElements($(".package"));
        collapseElements($(".element:not(.package)"));
        collapseNarratives($(".specElement"));
      });

      $("#expansions-requirements").click(function() {
        expandElements($(".package, .spec"));
        collapseElements($(".element:not(.package):not(.spec)"));
        collapseNarratives($(".specElement"));
      });

      $("#expansions-exceptions").click(function() {
        expandElements($(".specElement:has(.exceptions)"));
        expandElements($(".element.exceptions"));
        collapseElements($(".element:not(.exceptions):not(:has(.exceptions))"));
        collapseNarratives($(".specElement"));
      });

      $("#expansions-narrative").click(function() {
        expandElements($(".specElement:has(.narrative)"));
        collapseElements($(".element:not(:has(.narrative))"));
        expandNarratives($(".specElement"));
      });

      $("#expansions-full-details").click(function() {
        expandElements($(".element"));
        expandNarratives($(".specElement"));
      });

      $("#showResults").click(function() {
        $(".results").toggle();
      });

      // TODO: do more work in CSS selectors
      function showSpecElementsContainingState(state) {
        $(".specElement").each(function() {
          $(this).toggle($(this).hasClass(state) || $(this).find(".specElement." + state).length > 0);
        });
      }

      function expandElements(elements) {
        elements.removeClass("collapsed");
        elements.children(".elementBody").show();
      }

      function collapseElements(elements) {
        elements.addClass("collapsed");
        elements.children(".elementBody").hide();
      }

      function toggleElements(elements) {
        elements.toggleClass("collapsed");
        elements.children(".elementBody").toggle();
      }

      function expandNarratives(elements) {
        elements.find("> .elementBody > .narrative:not(.collapsed)").show();
        elements.find("> .elementBody > .narrative.collapsed").hide();
      }

      function collapseNarratives(elements) {
        elements.find("> .elementBody > .narrative:not(.collapsed)").hide();
        elements.find("> .elementBody > .narrative.collapsed").show();
      }

      function toggleNarratives(elements) {
        elements.find("> .elementBody > .narrative").toggle();
      }

      collapseElements($(".element"));
      collapseNarratives($(".specElement"));
    });
  </script>
  </body>
</html>

